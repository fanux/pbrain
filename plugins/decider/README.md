## Decider插件介绍
Decider （决策者） 之所以将此插件命名为这个是因为这个插件决定着容器的生杀大权。

一旦多个app都想伸缩，特别是“伸” 时，就需要权衡先满足谁。

甚至有时满足不了，需要杀死其它的app来满足某个优先级高的app。

决策者插件的策略配置文档就如同宪法一样，决策者的一切决策都是根据这个来的。

## 需要思考的问题
有很多问题需要思考，其实设计的重中之重就是策略文档的设计，这个设计出来了什么都好办了。

### App 优先级问题
起初准备给每个APP设置固定的优先级，这样会导致一个问题，就是可能把某一个app杀光了。
但是这往往是不想的结果。所以app的优先级应当随着数量的减少而增加，保证可控。

### Metrical（度量）问题
以什么纬度去决定调度，CPU？ 内存？ IO？ 其实都不合适，因为业务不同，伸缩的条件都不太一样，

所以决策者应该抽象出一个Metrcal(1~100)值，这个值怎么来的，插件也不知道，插件只知道对应的值来了怎么处理。

这个值估计只有业务知道，业务计算出这个值通知插件。

这个值可能是CPU，GPU，内存的使用情况，也可能是任务队列里的任务数量等。

## 策略文档设计
TODO Metrical最好是一个范围
```yaml
[
    {
        "App":"ats",
        "Specs":[
            {
                "Metrical":90,
                "Number":30,
                "Priority":50,
            },
            {
                "Metrical":60,
                "Number":20,
                "Priority":70,
            },
            {
                "Metrical":30,
                "Number":10,
                "Priority":90,
            },
            {
                "Metrical":10,
                "Number":5,
                "Priority":100,
            },
        ]
    },
    {
        "App":"hadoop",
        "Specs":[
            {
                "Metrical":90,
                "Number":20,
                "Priority":20,
            },
            {
                "Metrical":60,
                "Number":20,
                "Priority":40,
            },
            {
                "Metrical":30,
                "Number":20,
                "Priority":60,
            },
            {
                "Metrical":10,
                "Number":1,
                "Priority":100,
            },
        ]
    }
]
```
* `Metrical` 业务模块发来的一个度量值
* `Number`   收集到一个业务的消息，消息中的度量值对应的应该启动的实例数量
* `Priority` 优先级，很重要的一个参数，决定着当多个扩展实例的请求来了先满足哪个APP, 也决定着扩展请求来了资源不够用时释放哪些APP



## 业务度量消息格式 
```json
{
    "App":"ats",
    "Metrical":80
}
```
